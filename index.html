<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <link rel="icon" type="image/svg+xml" href="/assets/fav.png">
    <title>breeze.</title>
    <link rel="preconnect" href="https://fdn.fontcdn.ir">
    <link rel="preconnect" href="https://v1.fontapi.ir">
    <link href="https://v1.fontapi.ir/css/SFProDisplay" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="/uv/uv.bundle.js"></script>
    <script src="/uv/uv.config.js"></script>
    <script src="/baremux/index.js"></script>
    <link rel="stylesheet" href="/styles/index.css">
    <link rel="stylesheet" href="/fa/css/all-pro.css">
</head>

<body>
    <nav>
        <ul>
            <li style="padding-right: 35px;"><a onclick="navTo('home')" href="#" data-page="home">
                    <img src="/assets/fav.png" style="margin-right: 3px; margin-left: -6px; height: 22px;" alt="">
                    Home
                </a></li>
            <li class="divider"></li>
            <li class="disabled"><a href="#" onclick="navTo('games')" data-page="games">
                    <i class="lucide" data-lucide="gamepad-2"></i>
                </a></li>
            <li><a href="#" onclick="navTo('apps')" data-page="apps">
                    <i class="lucide" data-lucide="layout-grid"></i>
                </a></li>
            <li><a href="#" onclick="navTo('ultraviolet')" data-page="search">
                    <i class="lucide" data-lucide="globe" style="margin-right: 6px;"></i>
                    Search
                </a></li>
            <li><a onclick="navTo('movies')" href="#" data-page="movies">
                    <i class="lucide" data-lucide="clapperboard"></i>
                </a></li>
            <li class="divider"></li>
            <li class="disabled"><a href="#" onclick="navTo('chat')" data-page="chat">
                    <i class="lucide" data-lucide="message-square-text" style="margin-right: 6px;"></i>
                    Messages
                </a></li>
            <li class="divider"></li>
            <li><a href="#" onclick="navTo('settings')">
                    <i class="lucide" data-lucide="settings"></i>
                </a></li>
            <li><a href="#" data-page="info" onclick="navTo('info')">
                    <i class="lucide" data-lucide="info"></i>
                </a></li>
        </ul>
    </nav>
    <div id="homeContent">
        <img src="/assets/fav.png" class="ml-[50%] translate-x-[-50%] justify-center" style="filter: drop-shadow(0 0 40px rgba(171, 190, 199, 0.527));" alt="">
        <h1 class="text-8xl text-slate-700 font-black">breeze.</h1>
        <p class="text-xl font-medium text-slate-600">
            if links or searching dont work, do ctrl + shift + r a few times
        </p>
        <br>
        <input id="homesearch" class="focus:ring-2 focus:ring-slate-600 focus:outline-none" placeholder="enter a url or search here"
            style="background-color: rgb(15 23 42); border: 1px solid rgba(255,255,255,0.1); width: 100%; height: 3rem; padding: 0.75rem; border-radius: 9999px; color: white; transition: all 0.15s;"
            type="text" />
        <br><br>
    </div>

    <div class="toast-container fixed right-4 top-4 w-1/4">
    </div>

    <!-- DEV TOAST BUTTONS
    <div class="fixed flex justify-center left-1/2 bottom-5 translate-x-[-50%] h-fit w-1/2">
        <button class="w-fit m-1 h-fit p-4 text-white font-bold rounded-full bg-slate-900 border border-white/10" onclick="toast('success', 'Successful toast')">Success Toast</button>
        <button class="w-fit m-1 h-fit p-4 text-white font-bold rounded-full bg-slate-900 border border-white/10"
            onclick="toast('info', 'Info toast')">Info Toast</button>
        <button class="w-fit m-1 h-fit p-4 text-white font-bold rounded-full bg-slate-900 border border-white/10"
            onclick="toast('error', 'Error toast')">Error Toast</button>
        <button class="w-fit m-1 h-fit p-4 text-white font-bold rounded-full bg-slate-900 border border-white/10"
            onclick="toast('warn', 'Warning toast')">Warning Toast</button>
    </div> 
    -->

    <iframe id="contentFrame"></iframe>

    <script>
        async function registerSW() {
            if ("serviceWorker" in navigator) {
                await navigator.serviceWorker.register("/uv/sw.js").then(() => {
                    console.log(
                        "%cbreeze." + "%c sw registered!",
                        "color: white; background: linear-gradient(to bottom right, #040c16, #000000); border-radius: 5px; font-weight: bold; padding: 6px; font-family: sans-serif;",
                        "color: white; background: transparent; border-radius: 0px; padding: 0px;"
                    );
                    toast("log", "Service worker registered!")
                });
            }
        }

        window.addEventListener("load", () => {
            registerSW();
            lucide.createIcons();
        });

        const contentFrame = document.getElementById('contentFrame');
        const homeContent = document.getElementById('homeContent');
        const navLinks = document.querySelectorAll('nav a[data-page]');

        function navTo(l) {
            if (l === "home") {
                contentFrame.style.display = "none"
                homeContent.style.display = "block"
            } else {
                homeContent.style.display = "none"
                contentFrame.style.display = "block"
                contentFrame.src = `/pages/${l}.html`
            }
        }

        const homesearch = document.getElementById("homesearch");

        function rSearch(input) {
            let url = input;
            if (!url.includes(".") || url.includes(" ")) {
                url = "https://search.brave.com/search?q=" + url;
            } else {
                if (!url.startsWith("http://") && !url.startsWith("https://")) {
                    url = "https://" + url;
                }
            }

            homeContent.classList.add('hidden');
            contentFrame.classList.add('active');
            contentFrame.src = "/pages/ultraviolet.html?i=" + url;
            location.href = "#?i=" + url
        }

        homesearch?.addEventListener("keydown", (e) => {
            if (e.key === "Enter") {
                rSearch(homesearch?.value.trim());
            }
        });

        document.addEventListener("keydown", (e) => {
            if (!contentFrame.classList.contains('active')) {
                homesearch?.focus();
            }
        });

        function toast(icon, msg) {
            const container = document.querySelector(".toast-container")
            const newToast = document.createElement("div")
            const newToastIcon = document.createElement("i")
            newToastIcon.classList.add("toast-icon", "lucide", "far", "fa-icon-lol")
            const newToastMsg = document.createElement("span")
            newToastMsg.classList.add("toast-msg")
            newToast.classList.add("toast", "bg-slate-900", "transition-all", "relative", "duration-300", "shadow-black/30", "shadow-lg", "p-4", "h-fit", "w-1/1", "flex", "rounded-full", "m-3", "border", "border-white/10")
            newToast.style.right = "-120%"
            container.appendChild(newToast)
            newToast.appendChild(newToastIcon)
            newToast.appendChild(newToastMsg)

            switch (icon) {
                case "success":
                    if (newToastIcon && newToastMsg) {
                        newToastIcon.classList.add("fa-circle-check")
                        newToastMsg.textContent = msg
                    }
                    break
                case "info":
                    newToastIcon.classList.add("fa-circle-info")
                    newToastMsg.textContent = msg
                    break;
                case "error":
                    newToastIcon.classList.add("fa-circle-x")
                    newToastMsg.textContent = msg
                case "warn":
                    newToastIcon.classList.add("fa-circle-exclamation")
                    newToastMsg.textContent = msg
                case "log":
                    newToastIcon.classList.add("fa-memo-circle-info")
                    newToastMsg.textContent = msg
            }

            setTimeout(() => {
                newToast.style.right = "4%"
            }, 25)

            setTimeout(() => {
                newToast.style.right = "-120%"
            }, 4000)

            setTimeout(() => {
                newToast.remove()
            }, 4325)
        }
    </script>
</body>

</html>